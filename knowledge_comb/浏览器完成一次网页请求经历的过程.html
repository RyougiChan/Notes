<!DOCTYPE html>
<html>
  <head>
    <title>浏览器完成一次网页请求经历的过程</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <link href="resources/css/jquery-ui-themes.css" type="text/css" rel="stylesheet"/>
    <link href="resources/css/axure_rp_page.css" type="text/css" rel="stylesheet"/>
    <link href="data/styles.css" type="text/css" rel="stylesheet"/>
    <link href="files/浏览器完成一次网页请求经历的过程/styles.css" type="text/css" rel="stylesheet"/>
    <script src="resources/scripts/jquery-1.7.1.min.js"></script>
    <script src="resources/scripts/jquery-ui-1.8.10.custom.min.js"></script>
    <script src="resources/scripts/prototypePre.js"></script>
    <script src="data/document.js"></script>
    <script src="resources/scripts/prototypePost.js"></script>
    <script src="files/浏览器完成一次网页请求经历的过程/data.js"></script>
    <script type="text/javascript">
      $axure.utils.getTransparentGifPath = function() { return 'resources/images/transparent.gif'; };
      $axure.utils.getOtherPath = function() { return 'resources/Other.html'; };
      $axure.utils.getReloadPath = function() { return 'resources/reload.html'; };
    </script>
  </head>
  <body>
    <div id="base" class="">

      <!-- 主树 (组合) -->
      <div id="u0" class="ax_default" data-label="主树" data-left="1200" data-top="568" data-width="197" data-height="756">

        <!-- 1 (矩形) -->
        <div id="u1" class="ax_default box_1" data-label="1">
          <img id="u1_img" class="img " src="images/浏览器完成一次网页请求经历的过程/1_u1.png"/>
          <div id="u1_text" class="text ">
            <p><span>1.浏览器输入URL并回车</span></p>
          </div>
        </div>

        <!-- 2 (矩形) -->
        <div id="u2" class="ax_default box_1" data-label="2">
          <img id="u2_img" class="img " src="images/浏览器完成一次网页请求经历的过程/2_u2.png"/>
          <div id="u2_text" class="text ">
            <p><span>2.浏览器查找当前URL是否存在缓存，并比较缓存是否过期</span></p>
          </div>
        </div>

        <!-- 3 (矩形) -->
        <div id="u3" class="ax_default box_1" data-label="3">
          <img id="u3_img" class="img " src="images/浏览器完成一次网页请求经历的过程/3_u3.png"/>
          <div id="u3_text" class="text ">
            <p><span>3.DNS解析URL对应的IP</span></p>
          </div>
        </div>

        <!-- 3 (矩形) -->
        <div id="u4" class="ax_default box_1" data-label="3">
          <img id="u4_img" class="img " src="images/浏览器完成一次网页请求经历的过程/3_u4.png"/>
          <div id="u4_text" class="text ">
            <p><span>4.根据IP建立TCP连接（三次握手）</span></p>
          </div>
        </div>

        <!-- 2 (矩形) -->
        <div id="u5" class="ax_default box_1" data-label="2">
          <img id="u5_img" class="img " src="images/浏览器完成一次网页请求经历的过程/2_u5.png"/>
          <div id="u5_text" class="text ">
            <p><span>5.向服务器发送HTTP请求</span></p>
          </div>
        </div>

        <!-- 3 (矩形) -->
        <div id="u6" class="ax_default box_1" data-label="3">
          <img id="u6_img" class="img " src="images/浏览器完成一次网页请求经历的过程/2_u5.png"/>
          <div id="u6_text" class="text ">
            <p><span>6.服务器处理请求，浏览器接收HTTP响应</span></p>
          </div>
        </div>

        <!-- 3 (矩形) -->
        <div id="u7" class="ax_default box_1" data-label="3">
          <img id="u7_img" class="img " src="images/浏览器完成一次网页请求经历的过程/3_u7.png"/>
          <div id="u7_text" class="text ">
            <p><span>7.渲染页面(构建DOM树)</span></p>
          </div>
        </div>

        <!-- 3 (矩形) -->
        <div id="u8" class="ax_default box_1" data-label="3">
          <img id="u8_img" class="img " src="images/浏览器完成一次网页请求经历的过程/3_u8.png"/>
          <div id="u8_text" class="text ">
            <p><span>8.关闭TCP连接（四次挥手）</span></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u9" class="ax_default _连接符">
          <img id="u9_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u9_seg0"/>
          <img id="u9_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u9_seg1"/>
          <div id="u9_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u10" class="ax_default _连接符">
          <img id="u10_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u10_seg0"/>
          <img id="u10_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u10_seg1"/>
          <div id="u10_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u11" class="ax_default _连接符">
          <img id="u11_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u11_seg0"/>
          <img id="u11_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u11_seg1"/>
          <div id="u11_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u12" class="ax_default _连接符">
          <img id="u12_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u12_seg0"/>
          <img id="u12_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u12_seg1"/>
          <div id="u12_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u13" class="ax_default _连接符">
          <img id="u13_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u13_seg0"/>
          <img id="u13_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u13_seg1"/>
          <div id="u13_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u14" class="ax_default _连接符">
          <img id="u14_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u14_seg0"/>
          <img id="u14_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u14_seg1"/>
          <div id="u14_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>

        <!-- Unnamed (连接符) -->
        <div id="u15" class="ax_default _连接符">
          <img id="u15_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg0.png" alt="u15_seg0"/>
          <img id="u15_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u9_seg1.png" alt="u15_seg1"/>
          <div id="u15_text" class="text " style="display:none; visibility: hidden">
            <p></p>
          </div>
        </div>
      </div>

      <!-- 浏览器缓存机制 (组合) -->
      <div id="u16" class="ax_default" data-label="浏览器缓存机制" data-left="919" data-top="475" data-width="233" data-height="147">

        <!-- Unnamed (矩形) -->
        <div id="u17" class="ax_default box_2">
          <div id="u17_div" class=""></div>
          <div id="u17_text" class="text ">
            <p><span>1. Expires策略</span></p><p><span>2. Cache-Control策略</span></p><p><span>3. Last-Modified/If-Modified-Since</span></p><p><span>4. Etag/If-None-Match</span></p><p><span>5. HTML &lt;meta&gt; 标签</span></p>
          </div>
        </div>

        <!-- Unnamed (文件) -->
        <div id="u18" class="ax_default box_2">
          <img id="u18_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u18.png"/>
          <div id="u18_text" class="text ">
            <p><a id="u19" class="link"><span>浏览器缓存机制</span></a></p>
          </div>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u20" class="ax_default _连接符">
        <img id="u20_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u20_seg0.png" alt="u20_seg0"/>
        <img id="u20_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u20_seg1.png" alt="u20_seg1"/>
        <img id="u20_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u20_seg2.png" alt="u20_seg2"/>
        <img id="u20_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u20_seg3.png" alt="u20_seg3"/>
        <div id="u20_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u21" class="ax_default sticky_1">
        <div id="u21_div" class=""></div>
        <div id="u21_text" class="text ">
          <p><span>优秀资料</span></p><p><span><br></span></p><p><a id="u22" class="link"><span>1. 浏览器缓存</span></a></p><p><a id="u23" class="link"><span>2. 静态资源缓存面临的优化和部署问题</span></a></p><p><a id="u24" class="link"><span>3. 浏览器缓存知识小结及应用</span></a></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u25" class="ax_default sticky_2">
        <div id="u25_div" class=""></div>
        <div id="u25_text" class="text ">
          <p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">1. Expires</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">Expires: 缓存过期时间，用来指定资源到期的时间，是服务器端的具体的时间点。Expires=max-age + 请求时间，需要和 Last-Modified 结合使用。优先级低于 Cache-Control。</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">2. Cache-Control</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">Cache-Control包括：max-age / s-maxage/public/private/no-cache/no-store/must-revalidate等</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.1.</span><span style="font-family:'思源黑体 CN';font-weight:400;"> </span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">max-age</span><span style="font-family:'思源黑体 CN';font-weight:400;">（单位为s）指定设置缓存最大的有效时间，定义的是时间长短。当浏览器向服务器发送请求后，在max-age这段时间里浏览器就不会再向服务器发送请求了</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.2. s-maxage</span><span style="font-family:'思源黑体 CN';font-weight:400;">（单位为s）同max-age，只用于共享缓存（比如CDN缓存）</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.3. public</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 指定响应会被缓存，并且在多用户间共享。如果没有指定public还是private，则默认为public</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.4. private</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 响应只作为私有的缓存，不能在用户间共享。如果要求HTTP认证，响应会自动设置为private</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.5. no-cache</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 指定不缓存响应，表明资源不进行缓存。这并不代表浏览器不缓存，而是</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">在缓存前要向服务器确认资源是否被更改</span><span style="font-family:'思源黑体 CN';font-weight:400;">。因此有的时候只设置no-cache防止缓存还是不够保险，还可以加上private指令，将过期时间设为过去的时间</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">&nbsp; </span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">2.6. no-store</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 绝对禁止缓存</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp; 2.7. must-revalidate</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 指定如果页面是过期的，则去服务器进行获取。这个指令并不常用</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">3. Last-Modified/If-Modified-Since</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">服务器端文件的最后修改时间，需要和Cache-Control共同使用，是</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">检查服务器端资源是否更新</span><span style="font-family:'思源黑体 CN';font-weight:400;">的一种方式。当浏览器再次进行请求时，会向服务器传送If-Modified-Since报头，询问Last-Modified时间点之后资源是否被修改过。如果没有修改，则返回码为304，使用缓存；如果修改过，则再次去服务器请求资源，返回码和首次请求相同为200，资源为服务器最新资源。</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">4. Etag/If-None-Match</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">根据实体内容生成一段hash字符串，标识资源的状态，由服务端产生。浏览器会将这串字符串传回服务器，验证资源是否已经修改。使用ETag可以解决Last-Modified存在的一些问题：</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">a. 某些服务器不能精确得到资源的最后修改时间，这样就无法通过最后修改时间判断资源是否更新 </span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">b. 如果资源修改非常频繁，在秒以下的时间内进行修改，而Last-Modified只能精确到秒 </span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">c. 一些资源的最后修改时间改变了，但是内容没改变，使用ETag就认为资源还是没有修改的。</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">5. HTML &lt;meta&gt; 标签</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">在HTML页面的&lt;head&gt;节点中加入&lt;meta&gt;标签</span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">设定网页的到期时间</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">＜meta http-equiv=&quot;expires&quot; content=&quot;Wed, 20 Jun 2000 22:33:00 GMT&quot;＞&nbsp; </span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">设定禁止浏览器从本地机的缓存中调阅页面内容</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">＜meta http-equiv=&quot;Pragma&quot; content=&quot;no-cache&quot;＞&nbsp; </span></p><p><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">清除缓存（再访问这个页面要重新请求）</span></p><p><span style="font-family:'思源黑体 CN';font-weight:400;">&lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;&nbsp; </span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u26" class="ax_default _连接符">
        <img id="u26_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u26_seg0.png" alt="u26_seg0"/>
        <img id="u26_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u20_seg1.png" alt="u26_seg1"/>
        <img id="u26_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u26_seg2.png" alt="u26_seg2"/>
        <img id="u26_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u26_seg3.png" alt="u26_seg3"/>
        <div id="u26_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u27" class="ax_default sticky_2">
        <div id="u27_div" class=""></div>
        <div id="u27_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">DNS域名解析过程</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">1. 浏览器检查自身缓存中是否存在被解析过的此域名对应的ip地址，如果有，解析结束。域名被缓存的时间可通过 TTL 属性来设置。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">2. 如果浏览器缓存未命中，浏览器会查找操作系统中是否有这个域名对应的DNS解析结果。Windows中C:/windows/system32/drivers/etc/hosts文件设置，linux中/etc/hosts文件中设置。当解析到这个配置文件中的某个域名时，操作系统会在缓存中缓存这个解析结果（这就是为何修改host文件后不立即生效的原因）。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">3. 当前面两步都未命中时，操作系统会把这个域名发送给设置的DNS服务器（简称 </span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">LDNS</span><span style="font-family:'思源黑体 CN';font-weight:400;">）-local缩写，一般是本地区的域名服务器也可以是自己设置的域名服务器地址，如果命中，那解析就此结束并返回IP并标记为</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">非权威服务器的应答</span><span style="font-family:'思源黑体 CN';font-weight:400;">（windows中能用ipconfig查看DNS服务器地址，linux中cat /etc/resolv.conf查看DNS Server）。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">4. 如果LDNS没有命中，LDNS就会向</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Root Server域名服务器</span><span style="font-family:'思源黑体 CN';font-weight:400;">请求解析。LDNS会从配置文件里面读取13个根域名服务器的地址（这些地址是不变的，直接在BIND的配置文件中），然后向其中一台发起请求。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">5. 根域名服务器返回给LDNS一个所查询域的主域名服务器（</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">gTLD Server</span><span style="font-family:'思源黑体 CN';font-weight:400;">，国际顶尖域名服务器，如.com .cn .org等）地址。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">6. LDNS再向上一步返回的其中一台gTLD服务器发送请求。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">7. 接受请求的gTLD查找并返回这个域名对应的</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Name Server(NS)</span><span style="font-family:'思源黑体 CN';font-weight:400;">的地址，这个Name Server一般是网站注册的域名服务器。Name Server根据映射关系表找到目标ip，返回给LDNS。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">8. LDNS接受返回的</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">IP和TTL值</span><span style="font-family:'思源黑体 CN';font-weight:400;">。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">9. LDNS会缓存这个域名和IP的对应关系，缓存时间由TTL控制。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">10. LDNS把解析的结果返回给用户，用户根据TLL值缓存在本地系统缓存中，域名解析结束。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;"><br></span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u28" class="ax_default _连接符">
        <img id="u28_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u28_seg0.png" alt="u28_seg0"/>
        <img id="u28_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u28_seg1.png" alt="u28_seg1"/>
        <img id="u28_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u28_seg2.png" alt="u28_seg2"/>
        <img id="u28_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u28_seg3.png" alt="u28_seg3"/>
        <div id="u28_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u29" class="ax_default image">
        <img id="u29_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u29.png"/>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u30" class="ax_default image">
        <img id="u30_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u30.png"/>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u31" class="ax_default sticky_2">
        <div id="u31_div" class=""></div>
        <div id="u31_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">TCP连接</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">在通过第一步的DNS域名解析后，获取到了服务器的IP地址，在获取到IP地址后，便会开始建立一次连接，这是由TCP协议完成的，主要通过三次握手进行连接。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">1. 服务端通过socket，bind和listen准备好接受外来的连接，此时服务端状态为Listen</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">2. 第一次握手： 客户端通过调用connect来发起主动连接，发送SYN包（SYN=j）到服务器，并进入</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">SYN_SENT</span><span style="font-family:'思源黑体 CN';font-weight:400;">状态，等待服务器确认； </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">3. 第二次握手： 服务器收到SYN包，必须确认客户的SYN（ACK=j+1），同时自己也发送一个SYN包（SYN=k），即SYN+ACK包，此时服务器进入</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">SYN_RECV</span><span style="font-family:'思源黑体 CN';font-weight:400;">状态；</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">4. 第三次握手： 客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ACK=k+1），此包发送完毕，客户端和服务器进入</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;color:#1E1E1E;">ESTABLISHED</span><span style="font-family:'思源黑体 CN';font-weight:400;">（TCP连接成功）状态，完成三次握手。</span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u32" class="ax_default _连接符">
        <img id="u32_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u32_seg0.png" alt="u32_seg0"/>
        <img id="u32_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u32_seg1.png" alt="u32_seg1"/>
        <img id="u32_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u32_seg2.png" alt="u32_seg2"/>
        <img id="u32_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u32_seg3.png" alt="u32_seg3"/>
        <img id="u32_seg4" class="img " src="images/浏览器完成一次网页请求经历的过程/u32_seg4.png" alt="u32_seg4"/>
        <div id="u32_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u33" class="ax_default _连接符">
        <img id="u33_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u33_seg0.png" alt="u33_seg0"/>
        <img id="u33_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u33_seg1.png" alt="u33_seg1"/>
        <img id="u33_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u33_seg2.png" alt="u33_seg2"/>
        <img id="u33_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u33_seg3.png" alt="u33_seg3"/>
        <div id="u33_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u34" class="ax_default sticky_2">
        <div id="u34_div" class=""></div>
        <div id="u34_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;color:#1E1E1E;">HTTP请求与响应</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">HTTP请求报文由请求行</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">（request line）、请求头部（header）、空行和请求数据</span><span style="font-family:'思源黑体 CN';font-weight:400;">4个部分组成</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">HTTP响应报文也由四个部分组成，分别是：</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">状态行、响应头、空格、响应数据</span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u35" class="ax_default _连接符">
        <img id="u35_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg0.png" alt="u35_seg0"/>
        <img id="u35_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg1.png" alt="u35_seg1"/>
        <img id="u35_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg2.png" alt="u35_seg2"/>
        <img id="u35_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg3.png" alt="u35_seg3"/>
        <div id="u35_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u36" class="ax_default _连接符">
        <img id="u36_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg0.png" alt="u36_seg0"/>
        <img id="u36_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u36_seg1.png" alt="u36_seg1"/>
        <img id="u36_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg2.png" alt="u36_seg2"/>
        <img id="u36_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u35_seg3.png" alt="u36_seg3"/>
        <div id="u36_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u37" class="ax_default sticky_1">
        <div id="u37_div" class=""></div>
        <div id="u37_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">HTTP 请求方法：</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">GET</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 请求读取由URL所标识的信息</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">POST</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 给服务器发送数据</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">HEAD</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 请求读取由URL所有标识的信息的首部</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">PUT</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 在指明的URL下存储一个文档</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">OPTION</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 请求一些选项的信息</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">DELETE</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 删除指明的URL所标识的资源</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">TRACE</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 用来进行环回测试的请求报文</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">CONNECT</span><span style="font-family:'思源黑体 CN';font-weight:400;">: 用于代理服务器</span></p>
        </div>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u38" class="ax_default image">
        <img id="u38_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u38.jpg"/>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u39" class="ax_default image">
        <img id="u39_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u39.jpg"/>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u40" class="ax_default sticky_3">
        <div id="u40_div" class=""></div>
        <div id="u40_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">典型的常用请求头：</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">User-Agent</span><span style="font-family:'思源黑体 CN';font-weight:400;">：产生请求的客户端类型。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Accept</span><span style="font-family:'思源黑体 CN';font-weight:400;">：客户端可识别的内容类型列表。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Host</span><span style="font-family:'思源黑体 CN';font-weight:400;">：请求的主机名，允许多个域名同处一个IP地址</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Accept-Encoding</span><span style="font-family:'思源黑体 CN';font-weight:400;">： 客户端使用的编码环境和编码方式</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Accept-Language</span><span style="font-family:'思源黑体 CN';font-weight:400;">： 客户端语言环境</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Authorization</span><span style="font-family:'思源黑体 CN';font-weight:400;">：授权信息，一般用于存放授权之后的信息</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Connection</span><span style="font-family:'思源黑体 CN';font-weight:400;">：表示是否需要持久连接</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Content-Length</span><span style="font-family:'思源黑体 CN';font-weight:400;">：表示请求数据正文的长度</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Cookie</span><span style="font-family:'思源黑体 CN';font-weight:400;">：存储保持会话的重要信息</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Referer</span><span style="font-family:'思源黑体 CN';font-weight:400;">：表示该次请求的来源，一般用于做防盗链</span></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u41" class="ax_default sticky_3">
        <div id="u41_div" class=""></div>
        <div id="u41_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">状态码主要包括：</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">1xx</span><span style="font-family:'思源黑体 CN';font-weight:400;">：指示信息–表示请求已接收，继续处理。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">2xx</span><span style="font-family:'思源黑体 CN';font-weight:400;">：成功–表示请求已被成功接收、理解、接受。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">3xx</span><span style="font-family:'思源黑体 CN';font-weight:400;">：重定向–要完成请求必须进行更进一步的操作。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">4xx</span><span style="font-family:'思源黑体 CN';font-weight:400;">：客户端错误–请求有语法错误或请求无法实现。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">5xx</span><span style="font-family:'思源黑体 CN';font-weight:400;">：服务器端错误–服务器未能实现合法的请求。</span></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u42" class="ax_default sticky_1">
        <div id="u42_div" class=""></div>
        <div id="u42_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">常见HTTP状态码：</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">200 OK</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 表示请求被服务器正常处理 </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">204 No Content</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 表示请求已成功处理，但是没有内容返回</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">206 Partial Content</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 表示服务器已经完成了部分</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">GET</span><span style="font-family:'思源黑体 CN';font-weight:400;">请求</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">301 Moved Permanently </span><span style="font-family:'思源黑体 CN';font-weight:400;">永久重定向，表示请求的资源已经永久的搬到了其他位置</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;"> </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">302 Moved Temporarily </span><span style="font-family:'思源黑体 CN';font-weight:400;">临时重定向，表示请求的资源临时搬到了其他位置</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">303 See Other</span><span style="font-family:'思源黑体 CN';font-weight:400;"> 表示请求资源存在另一个URI，应使用GET定向获取请求资源 </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">304 Not Modified </span><span style="font-family:'思源黑体 CN';font-weight:400;">表示请求的资源自上次请求起未修改</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">400 Bad Request </span><span style="font-family:'思源黑体 CN';font-weight:400;">表示请求报文存在语法错误或参数错误，服务器不理解</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;"> </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">401 Unauthorized </span><span style="font-family:'思源黑体 CN';font-weight:400;">表示发送的请求需要有HTTP认证信息或者是认证失败</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">403 Forbidden </span><span style="font-family:'思源黑体 CN';font-weight:400;">表示对请求资源的访问被服务器拒绝</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">404 Not Found </span><span style="font-family:'思源黑体 CN';font-weight:400;">表示服务器找不到请求的资源</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;"> </span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">500 Internal Server </span><span style="font-family:'思源黑体 CN';font-weight:400;">Error 表示服务器执行请求的时候出错</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">502 Bad Gateway </span><span style="font-family:'思源黑体 CN';font-weight:400;">只有HTTP代理会发送这个响应代码。它表明代理方面出现问题，或者代理与上行服务器之间出现问题，而不是上行服务器本身有问题</span></p><p style="font-size:13px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;font-size:14px;">503 Server Unavailable </span><span style="font-family:'思源黑体 CN';font-weight:400;font-size:14px;">表示服务器超负载或正停机维护，无法处理请求</span><span style="font-family:'Arial Negreta', 'Arial Normal', 'Arial';font-weight:700;"> </span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u43" class="ax_default _连接符">
        <img id="u43_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u43_seg0.png" alt="u43_seg0"/>
        <img id="u43_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u43_seg1.png" alt="u43_seg1"/>
        <img id="u43_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u43_seg2.png" alt="u43_seg2"/>
        <img id="u43_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u43_seg3.png" alt="u43_seg3"/>
        <div id="u43_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u44" class="ax_default _连接符">
        <img id="u44_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u44_seg0.png" alt="u44_seg0"/>
        <img id="u44_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u44_seg1.png" alt="u44_seg1"/>
        <img id="u44_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u44_seg2.png" alt="u44_seg2"/>
        <img id="u44_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u44_seg3.png" alt="u44_seg3"/>
        <div id="u44_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u45" class="ax_default _连接符">
        <img id="u45_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u45_seg0.png" alt="u45_seg0"/>
        <img id="u45_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u45_seg1.png" alt="u45_seg1"/>
        <img id="u45_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u45_seg2.png" alt="u45_seg2"/>
        <img id="u45_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u45_seg3.png" alt="u45_seg3"/>
        <div id="u45_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u46" class="ax_default sticky_1">
        <div id="u46_div" class=""></div>
        <div id="u46_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">渲染页面</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">如果说响应的内容是HTML文档的话，就需要浏览器进行解析渲染呈现给用户。整个过程涉及两个方面：解析和渲染。</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">在渲染页面之前</span><span style="font-family:'思源黑体 CN';font-weight:400;">，需要构建DOM树和CSSOM树。在浏览器还没接收到完整的 HTML 文件时，它就开始渲染页面了，在遇到外部链入的脚本标签或样式标签或图片时，会再次发送 HTTP 请求重复上述的步骤。在收到 CSS 文件后会对已经渲染的页面重新渲染，加入它们应有的样式，图片文件加载完立刻显示在相应位置。在这一过程中可能会触发页面的</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">重绘或重排</span><span style="font-family:'思源黑体 CN';font-weight:400;">。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Repaint</span><span style="font-family:'思源黑体 CN';font-weight:400;">，</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">重绘</span><span style="font-family:'思源黑体 CN';font-weight:400;">，意味着元素发生的改变只是影响了元素的一些外观之类的时候（例如，背景色，边框颜色，文字颜色等），此时只需要应用新样式绘制这个元素，这个过程称为Repaint。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">Reflow/Layout</span><span style="font-family:'思源黑体 CN';font-weight:400;">，</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">回流</span><span style="font-family:'思源黑体 CN';font-weight:400;">，一般意味着元素的内容、结构、位置或尺寸发生了变化，需要重新计算样式和渲染树，这个过程称为Reflow。Reflow的成本比Repaint的成本高得多。</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">&nbsp;&nbsp;&nbsp; 通常触发 Reflow 的原因有：</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp;&nbsp;&nbsp; Initial</span><span style="font-family:'思源黑体 CN';font-weight:400;">，网页初始化的时候</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp;&nbsp;&nbsp; Incremental</span><span style="font-family:'思源黑体 CN';font-weight:400;">，js 在操作DOM树时</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp;&nbsp;&nbsp; Resize</span><span style="font-family:'思源黑体 CN';font-weight:400;">，其些元件的尺寸改变</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp;&nbsp;&nbsp; StyleChange</span><span style="font-family:'思源黑体 CN';font-weight:400;">，如果CSS的属性发生变化了</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">&nbsp;&nbsp;&nbsp; Dirty</span><span style="font-family:'思源黑体 CN';font-weight:400;">，几个Incremental的reflow发生在同一个frame的子树上</span></p>
        </div>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u47" class="ax_default image">
        <img id="u47_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u47.png"/>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u48" class="ax_default image">
        <img id="u48_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u48.png"/>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u49" class="ax_default _连接符">
        <img id="u49_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u49_seg0.png" alt="u49_seg0"/>
        <img id="u49_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u49_seg1.png" alt="u49_seg1"/>
        <img id="u49_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u49_seg2.png" alt="u49_seg2"/>
        <img id="u49_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u49_seg3.png" alt="u49_seg3"/>
        <div id="u49_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (矩形) -->
      <div id="u50" class="ax_default sticky_1">
        <div id="u50_div" class=""></div>
        <div id="u50_text" class="text ">
          <p style="font-size:16px;"><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">关闭TCP连接</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;"><br></span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">1. 客户端或服务端首先调用close，成为主动关闭端，向另一端发送</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">FIN</span><span style="font-family:'思源黑体 CN';font-weight:400;">分节，表示数据发送完毕，此时主动关闭端状态</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">FIN_WAIT_1</span><span style="font-family:'思源黑体 CN';font-weight:400;">；</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">2. 接收到FIN的是被动关闭端，FIN由TCP确认，先向主动关闭端发送</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">ACK</span><span style="font-family:'思源黑体 CN';font-weight:400;">，作为一个文件结束符传递给接收端应用进程（放在已排队等候该应用进程接收到的任何其他数据之后），因为FIN的接收意味着接收端应用进程在相应连接无额外数据可接收，接收端状态变为</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">CLOSE_WAIT</span><span style="font-family:'思源黑体 CN';font-weight:400;">；主动关闭端接收到</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">ACK</span><span style="font-family:'思源黑体 CN';font-weight:400;">状态变为</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">FIN_WAIT_2</span><span style="font-family:'思源黑体 CN';font-weight:400;">；</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">3. 一段时间后，接收端接收到这个文件结束符的应用进程调用close关闭套接字，向主动关闭端发送</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">FIN</span><span style="font-family:'思源黑体 CN';font-weight:400;">，接收端状态为</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">LAST_ACK</span><span style="font-family:'思源黑体 CN';font-weight:400;">；</span></p><p style="font-size:14px;"><span style="font-family:'思源黑体 CN';font-weight:400;">4. 主动关闭端确认</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">FIN</span><span style="font-family:'思源黑体 CN';font-weight:400;">，状态变为</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">TIME_WAIT</span><span style="font-family:'思源黑体 CN';font-weight:400;">，并向接收端发送</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">ACK</span><span style="font-family:'思源黑体 CN';font-weight:400;">，接收端接收到</span><span style="font-family:'思源黑体 CN Bold', '思源黑体 CN Regular', '思源黑体 CN';font-weight:700;">ACK</span><span style="font-family:'思源黑体 CN';font-weight:400;">关闭TCP，而主动关闭端一段时间后也关闭TCP；</span></p>
        </div>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u51" class="ax_default _连接符">
        <img id="u51_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u51_seg0.png" alt="u51_seg0"/>
        <img id="u51_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u51_seg1.png" alt="u51_seg1"/>
        <img id="u51_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u51_seg2.png" alt="u51_seg2"/>
        <img id="u51_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u51_seg3.png" alt="u51_seg3"/>
        <img id="u51_seg4" class="img " src="images/浏览器完成一次网页请求经历的过程/u51_seg4.png" alt="u51_seg4"/>
        <div id="u51_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>

      <!-- Unnamed (图像) -->
      <div id="u52" class="ax_default image">
        <img id="u52_img" class="img " src="images/浏览器完成一次网页请求经历的过程/u52.png"/>
      </div>

      <!-- Unnamed (连接符) -->
      <div id="u53" class="ax_default _连接符">
        <img id="u53_seg0" class="img " src="images/浏览器完成一次网页请求经历的过程/u53_seg0.png" alt="u53_seg0"/>
        <img id="u53_seg1" class="img " src="images/浏览器完成一次网页请求经历的过程/u53_seg1.png" alt="u53_seg1"/>
        <img id="u53_seg2" class="img " src="images/浏览器完成一次网页请求经历的过程/u53_seg2.png" alt="u53_seg2"/>
        <img id="u53_seg3" class="img " src="images/浏览器完成一次网页请求经历的过程/u53_seg3.png" alt="u53_seg3"/>
        <div id="u53_text" class="text " style="display:none; visibility: hidden">
          <p></p>
        </div>
      </div>
    </div>
  </body>
</html>
